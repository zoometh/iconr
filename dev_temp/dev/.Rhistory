a.df <- coords.eds[[a.edge]][[1]]
xa <- a.df[1,1];ya <- a.df[1,2];xb <- a.df[2,1];yb <- a.df[2,2];
eds.shp.coords[nrow(eds.shp.coords)+1,] <- c(xa,ya,xb,yb)
# coords.df <- as.data.frame(rbind(coords.df,c(xa,ya,xb,yb)))
}
eds.df <- eds.shp@data
eds.df <- cbind(eds.df,eds.shp.coords)
}
return(eds.df)
}
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",".tsv")
eds.df
edges <- "edges" ; dev <- ".tsv"
nodes <- "nodes"
file.exists(paste0(doss,'/',nodes,".tsv"))
read.eds <- function(doss,site,decor,edges,nodes="nodes",dev=".tsv"){
# doss <- doss.extdata ; edges <- "edges" ; dev <- ".shp"
# doss <- doss.extdata ; edges <- "edges" ; dev <- ".tsv"
# nodes <- "nodes"
# site <- "Cerro Muriano" ; decor <- "Cerro Muriano 1"
# read nodes from .tsv or shapefile
# TODO: read .csv
eds.shp.coords <- data.frame(xa=numeric(0),
ya=numeric(0),
xb=numeric(0),
yb=numeric(0))
if(dev==".tsv"){
# read nodes to get coordinates
flag.coords <- F
if(file.exists(paste0(doss,'/',nodes,".tsv"))){
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
flag.coords <- T
}
if(file.exists(paste0(doss,'/',nodes,".shp"))){
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".shp")
flag.coords <- T
}
if(!flag.coords){
return(paste0("Error: coordinates of the edges cannot be calculated",
"\ncreate first a nodes dataframe or a nodes shapefile",
"\nor create a shapefile for the edges"))
}
eds.df <- read.table(file = paste0(doss,"/",edges,dev), sep = '\t', header = TRUE)
eds.df <- eds.df[eds.df[,"site"]==site & eds.df[,"decor"]==decor,]
# get coordinates from nodes
for (a.edge in 1:nrow(eds.df)){
# a.edge <- 1
nd.a <- eds.df[a.edge,"a"]
nd.b <- eds.df[a.edge,"b"]
xa <- nds.df[nds.df[,"id"]==nd.a,"x"]
ya <- nds.df[nds.df[,"id"]==nd.a,"y"]
xb <- nds.df[nds.df[,"id"]==nd.b,"x"]
yb <- nds.df[nds.df[,"id"]==nd.b,"y"]
eds.shp.coords[nrow(eds.shp.coords)+1,] <- c(xa,ya,xb,yb)
}
eds.df <- cbind(eds.df,eds.shp.coords)
}
if(dev==".shp"){
eds.shp <- rgdal::readOGR(dsn = doss, layer = edges)
# extract edges coordinates
coords.eds <- lapply(slot(eds.shp, "lines"), function(x) lapply(slot(x, "Lines"),
function(y) slot(y, "coords")))
# loop to get coordinates and fill df
for (a.edge in 1:length(coords.eds)){
# a.edge <- 1
a.df <- coords.eds[[a.edge]][[1]]
xa <- a.df[1,1];ya <- a.df[1,2];xb <- a.df[2,1];yb <- a.df[2,2];
eds.shp.coords[nrow(eds.shp.coords)+1,] <- c(xa,ya,xb,yb)
# coords.df <- as.data.frame(rbind(coords.df,c(xa,ya,xb,yb)))
}
eds.df <- eds.shp@data
eds.df <- cbind(eds.df,eds.shp.coords)
}
return(eds.df)
}
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",".tsv")
eds.df
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".tsv")
eds.df
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
library(decorr)
ls("package:decorr")
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
library(decorr)
ls("package:decorr")
# load nodes.tsv
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".tsv")
eds.df
nds.df
read.eds <- function(doss,site,decor,edges,nodes="nodes",dev=".tsv"){
# doss <- doss.extdata ; edges <- "edges" ; dev <- ".shp"
# doss <- doss.extdata ; edges <- "edges" ; dev <- ".tsv"
# nodes <- "nodes"
# site <- "Cerro Muriano" ; decor <- "Cerro Muriano 1"
# read nodes from .tsv or shapefile
# TODO: read .csv
eds.shp.coords <- data.frame(xa=numeric(0),
ya=numeric(0),
xb=numeric(0),
yb=numeric(0))
# choice: tsv
if(dev==".tsv"){
# read nodes to get coordinates
flag.coords <- F
if(file.exists(paste0(doss,'/',nodes,".tsv"))){
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
flag.coords <- T
}
eds.df <- read.table(file = paste0(doss,"/",edges,dev), sep = '\t', header = TRUE)
eds.df <- eds.df[eds.df[,"site"]==site & eds.df[,"decor"]==decor,]
# get coordinates from nodes
for (a.edge in 1:nrow(eds.df)){
# a.edge <- 1
nd.a <- eds.df[a.edge,"a"]
nd.b <- eds.df[a.edge,"b"]
xa <- nds.df[nds.df[,"id"]==nd.a,"x"]
ya <- nds.df[nds.df[,"id"]==nd.a,"y"]
xb <- nds.df[nds.df[,"id"]==nd.b,"x"]
yb <- nds.df[nds.df[,"id"]==nd.b,"y"]
eds.shp.coords[nrow(eds.shp.coords)+1,] <- c(xa,ya,xb,yb)
}
eds.df <- cbind(eds.df,eds.shp.coords)
}
# choice: shapefile
if(dev==".shp"){
if(file.exists(paste0(doss,'/',nodes,".shp"))){
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".shp")
flag.coords <- T
}
if(!flag.coords){
return(paste0("Error: coordinates of the edges cannot be calculated",
"\ncreate first a nodes dataframe or a nodes shapefile",
"\nor create a shapefile for the edges"))
}
eds.shp <- rgdal::readOGR(dsn = doss, layer = edges)
# extract edges coordinates
coords.eds <- lapply(slot(eds.shp, "lines"), function(x) lapply(slot(x, "Lines"),
function(y) slot(y, "coords")))
# loop to get coordinates and fill df
for (a.edge in 1:length(coords.eds)){
# a.edge <- 1
a.df <- coords.eds[[a.edge]][[1]]
xa <- a.df[1,1];ya <- a.df[1,2];xb <- a.df[2,1];yb <- a.df[2,2];
eds.shp.coords[nrow(eds.shp.coords)+1,] <- c(xa,ya,xb,yb)
# coords.df <- as.data.frame(rbind(coords.df,c(xa,ya,xb,yb)))
}
eds.df <- eds.shp@data
eds.df <- cbind(eds.df,eds.shp.coords)
}
return(eds.df)
}
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".tsv")
eds.df
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
eds.df
eds.shp <- rgdal::readOGR(dsn = doss, layer = edges)
edges <- "edges"
eds.shp <- rgdal::readOGR(dsn = doss, layer = edges)
eds.shp <- rgdal::readOGR(dsn = doss, layer = edges,verbose = F)
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
# load nodes.tsv
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".tsv")
library(decorr)
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
library(decorr)
ls("package:decorr")
# load nodes.tsv
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".tsv")
nds.df
eds.df
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "id",
shw = c("nodes","edges"))
img.graph
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
doss <- system.file("extdata", package = "decorr")
rm(list=ls())
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
library(decorr)
ls("package:decorr")
# load nodes.tsv
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".tsv")
# imgs.df <- read.nds(example.folder,"imgs",".tsv")
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "id",
shw = c("nodes","edges"))
rm(list=ls()) # remove all Globs var
remove.packages("decorr", lib="~/R/win-library/3.6")
remove.packages("decorr", lib="~/R/win-library/3.6")
rm(list=ls()) # remove all Globs var
# .rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
library(decorr)
ls("package:decorr")
# load nodes.tsv
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".tsv")
# imgs.df <- read.nds(example.folder,"imgs",".tsv")
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "id",
shw = c("nodes","edges"))
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
rm(list=ls()) # remove all Globs var
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
library(decorr)
ls("package:decorr")
# load nodes.tsv
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".tsv")
# imgs.df <- read.nds(example.folder,"imgs",".tsv")
plot.dec.grph
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "id",
shw = c("nodes","edges"))
img.graph
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".shp")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".tsv")
# imgs.df <- read.nds(example.folder,"imgs",".tsv")
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "id",
shw = c("nodes","edges"))
img.graph
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".shp")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
# imgs.df <- read.nds(example.folder,"imgs",".tsv")
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "id",
shw = c("nodes","edges"))
img.graph
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
remove.packages("decorr", lib="~/R/win-library/3.6")
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
library(decorr)
detach("package:decorr", unload = TRUE)
library(decorr)
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
library(decorr)
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
remove.packages("decorr", lib="~/R/win-library/3.6")
rm(list=ls()) # remove all Globs var
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr",build_vignettes = T) # OK
library(decorr)
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
nds.df
class(nds.df)
nds.df
colnames(nds.df)
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
# imgs.df <- read.nds(example.folder,"imgs",".tsv")
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "id",
shw = c("nodes","edges"))
img.graph
}
class(img.graph)
remove.packages("decorr", lib="~/R/win-library/3.6")
rm(list=ls()) # remove all Globs var
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr") # OK
library(decorr)
# ls("package:decorr")
# load nodes.tsv
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
# imgs.df <- read.nds(example.folder,"imgs",".tsv")
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "id",
shw = c("nodes","edges"))
img.graph
read.nds
read.eds
colnames(eds.df)
remove.packages("decorr", lib="~/R/win-library/3.6")
rm(list=ls()) # remove all Globs var
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr") # OK
library(decorr)
# load nodes.tsv
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".tsv")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
# imgs.df <- read.nds(example.folder,"imgs",".tsv")
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "id",
shw = c("nodes","edges"))
img.graph
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "type",
shw = c("nodes","edges"))
img.graph
img.graph
doss <- system.file("extdata", package = "decorr")
drawing <- system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr")
magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
drawing <- magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
knitr::include_graphics(u.shaped.prof)
drawing <- magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
knitr::include_graphics(drawing)
drawing <- magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
drawing
# knitr::include_graphics(drawing)
drawing <- magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
plot(drawing)
# knitr::include_graphics(drawing)
drawing <- magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
# plot(drawing)
magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".shp")
kable(nds.df)
library(knitr)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.pos = 'H'
)
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".shp")
kable(nds.df)
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".shp")
nds.df
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
eds.df
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
eds.df
drawing <- magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
plot(drawing)
ls("package:decorr")
ls(system.file("extdata", package = "decorr"))
list.files(system.file("extdata", package = "decorr"))
drawing <- magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
plot(drawing,main="zezer")
drawing <- magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
plot(drawing,main="zezer")
drawing <- magick::image_read(system.file("extdata", "Cerro_Muriano.Cerro_Muriano_1.jpg", package = "decorr"))
plot(drawing)
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".shp")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
# imgs.df <- read.nds(example.folder,"imgs",".tsv")
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "type",
shw = c("nodes","edges"))
img.graph
class(img.graph)
plot(img.graph)
doss <- system.file("extdata", package = "decorr")
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
eds.df
library(knitr)
remove.packages("decorr", lib="~/R/win-library/3.6")
rm(list=ls()) # remove all Globs var
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr") # OK
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr") # OK
devtools::install_github("zoometh/iconr") # OK
library(decorr)
doss <- system.file("extdata", package = "decorr")
print(list.files(doss))
plot(img.graph)
site <- "Cerro Muriano"
decor <- "Cerro Muriano 1"
nds.df <- read.nds(doss = doss,site = site,decor = decor,nodes = "nodes",dev = ".shp")
eds.df <- read.eds(doss = doss,site = site,decor = decor,edges = "edges",dev = ".shp")
img.graph <- plot.dec.grph(nds.df = nds.df,
eds.df = eds.df,
doss = doss,
site = "Cerro Muriano",
decor = "Cerro Muriano 1",
lbl.txt = "type",
shw = c("nodes","edges"))
plot(img.graph)
plot(img.graph)
plot(img.graph)
plot(img.graph)
plot(img.graph)
plot(img.graph)
plot(img.graph)
plot(img.graph)
plot(img.graph)
plot(img.graph)
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr",build_vignettes = T)
library(decorr)
library(decorr)
devtools::install_github("zoometh/aritmetik4",build_vignettes = T)
devtools::install_github("zoometh/aritmek4",build_vignettes = T)
devtools::install_github("zoometh/arimek4",build_vignettes = T)
devtools::install_github("zoometh/aritmek4",build_vignettes = T)
.rs.restartR() # uninstall & restart session
remove.packages("decorr", lib="~/R/win-library/3.6")
devtools::install_github("zoometh/iconr",build_vignettes = T)
setwd("D:/Projet Art Rupestre/scripts/scripts_r/package_create/iconr")
remove.packages("decorr", lib="~/R/win-library/3.6")
devtools::install_github("zoometh/iconr",build_vignettes = T)
library(decorr)
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr",build_vignettes = T)
library(decorr)
remove.packages("decorr", lib="~/R/win-library/3.6")
.rs.restartR() # uninstall & restart session
devtools::install_github("zoometh/iconr")
library(decorr)
